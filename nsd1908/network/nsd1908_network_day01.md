# nsd1908_network_day01

张志刚

DOD：国防部

ARPA：高级研究项目署

传统的PSTN（公共交换电话网）拨号上网，速率：56kbps

计算机上存储数据使用byte字节单位，速率采用bit比特单位。

1byte = 8bit

ISDN：综合业务数字网

## 国际组织

- ISO：国际标准化组织
- IEEE：电气与电子工程师协会
- IETF：Internet工程师任务组

## 网络分类

### 按地域跨度

- 局域网：LAN
- 广域网：WAN
- 城域网：MAN

### 按技术划分

- 对等网：peer-to-peer
- C/S：Client/Server
- B/S：Browser/Server

### 按安全划分

- 内部网：intranet
- 外部网：extranet
- 因特网：Internet

## 曾经辉煌的中国网络设备公司

巨：巨龙集团

大：大唐电讯

中：中兴

华：华为

## 手机行业

中：中兴

华：华为

酷：酷派

联：联想

## 网络拓扑

- 星型：交换机连接多个节点，最常用
- 点对点
- 网状

## OSI参考模型：开放系统互联参考模型。背下来

- 共七层，从下到上为第1到第7层
  - 应用层，第七层
  - 表示层，第六层
  - 会话层
  - 传输层
  - 网络层
  - 数据链路层
  - 物理层，第一层

## TCP/IP模型

- 共五层
  - 低4层与OSI低4层一样
  - OSI的高三层合并为应用层

## 数据发送流程

- 应用层的应用程序，准备好数据，向下发送到表示层
- 表示层负责数据形式的表示，比如声音用mp3，加密、压缩
- 会话层负责建立到远端的会话
- 传输层负责将数据拆分成数据段segment，并添加序列号，以及源和目标的端口号。如果需要可靠传输，采用TCP；否则使用UDP
- 网络层负责将数据打包package，添加源和目标的IP地址。网络层重要设备是路由器，负责选择路径，将数据包发往目的地
- 数据链路层将数据封装成帧frame，添加源和目标的MAC地址。重要设备是交换机
- 物理层将数据表示成2进制的0和1，叫比特bit，在介质上发送

## PDU：协议数据单元

第一到第四层，每个层次的数据都有一个专用术语，统称为PDU

- 第一层：比特bit
- 第二层：帧frame
- 第三层：包package
- 第四层：段segment

数据自上向下发送时，每个层次都会增加一部分内容，叫作封装；接收数据时，从下向上，每个层都会把发送端对等层次的头部信息移除，叫作解封装。

协议就是语言，传输的数据就是内容。只有语言相通才能理解对方，只有协议相同才能正确收发数据。

印表会传往树屋



## 华为设备基础配置

1. 设备配置时，有不同的视图模式，代表了不同的配置权限等。在不同的视图模式下，可以执行的命令也不相同
   1. \<主机名\>：用户视图，只能执行一些基础配置和查看
   2. [主机名]：系统视图，可以执行很多全局生效的配置操作
   3. [主机名-接口]：接口视图，配置只对当前接口生效

2. 配置时，可以按?来查看可用的命令。按回车，逐行向下翻，按空格键，逐屏向下翻，按q退出

```shell
<Huawei>?
<Huawei>l?   # 列出所有的以l开头的命令
<Huawei>la  # 如果按tab，可以将命令补全，因为只有language-mode以la开头
<Huawei>language-mode Chinese   # 将提示改为中文
```

3. 基础命令

```shell
<Huawei>system-view  # 进入系统视图
[Huawei]sysname sw1  # 修改主机名
[sw1]display interface brief  # 查看接口的简要信息
[sw1]int g0/0/1   # 进入接口
# Gigabyte指的是1000M接口
[sw1-Gigabyte0/0/1] quit   # 返回一级
[sw1]quit   # 返回一级
<sw1>quit
[sw1-Gigabyte0/0/1] 按ctrl+z直接退回用户视图
```

4. 交换机常用命令

```shell
<sw1>display version   # 显示版本
<sw1>system-view
[sw1>display current-configuration  # 查看当前配置（内存中的配置）

# 配置密码
[sw1]aaa   # 进入3模式
# Athentication认证：你是谁
# Athorization授权：你能干什么
# Audit审计：你都干了什么
[sw1-aaa]local-user 用户名 password cipher 密码  # 创建加密的密码
[sw1-aaa] quit  # 退到系统视图
[sw1]user-interface console 0  # 进入控制台接口模式
[sw1-ui-console0]authentication-mode aaa  # 启用aaa认证
[sw1-ui-console0]return   # 退回到用户视图
<sw1>quit  # 退出到最外层，相当于手机锁屏

<sw1>save  # 保存，输入y确认保存，再回车，使用默认的文件名
<sw1>reboot  # 重启，回答y确认需要重启

<sw1>display saved-configuration  # 查看存盘的配置
# 恢复出厂设置
<sw1>reset saved-configuration  # 回答y，清除已存盘配置
<sw1>reboot  # 先回答n，不存盘当前配置，再回答y，重启

# 自定义控制台会话超时时间（相当于手机锁屏时间）
[sw1]user-interface console 0
[sw1-ui-console0]idle-timeout 分钟数
```

## 数据链路层

### MAC地址

- 由48位2进制数组成，表示的时候，转换成16进制数。
- MAC地址也被称作物理地址、硬件地址，因为是设备生产的时候就烧到印制电路板中了
- MAC地址前24位是由IEEE分配的，称作厂商的组织唯一标识符OUI。后24位厂商自定义



16进制与2进制的转换

- 转换时，总是把4个2进制数和1个16进制数对应转换即可

```shell
0000 -> 0
0001 -> 1
0010 -> 2
0011 -> 3
0100 -> 4
0101 -> 5
0110 -> 6
0111 -> 7
1000 -> 8
1001 -> 9
1010 -> a
1011 -> b
1100 -> c
1101 -> d
1110 -> e
1111 -> f
```

## 交换机

交换机的作用是：在局域网中连接各个节点，并在它们之间转发数据帧

### 工作原理：

- 交换机根所它的MAC地址表，决定该如何转发数据帧
- MAC地址表是动态学习的。一开始MAC地址表为空
- 当交换机收到一个数据帧时，就根据帧的源MAC地址建立地址表
- 当交换机转发数据时，查询目标MAC地址在自己的哪个端口连接。如果找不到，将会向除接收端口以外的其他端口广播发送
- MAC地址在交换机的MAC地址表中，默认保存300秒，如果300秒内再也没有收到数据帧，将会把MAC地址移除。

## IP地址

- IP地址是网络层地址。低层次设备不能有高层地址，所以IP地址不能配置在二层交换机的端口上。
- IP地址由32位2进制数构成。总体上可以分为两部分：网络＋主机
- 为了方便表示，人为地，将8位换算成10进制数，共4段。4段数字用小数点分隔，称作点分10进制的表示方式。
- 相同的网络，网络部分相同；主机部分一定不同
- 不同的网络，网络部分一定不同；主机部分可以相同
- 子网掩码
  - 用于判定一个IP地址的网络部分和主机部分
  - 网络部分全写为1，主机部分写为0
  - 1对应的部分是网络，0对应的部分是主机
- 二层交换机连接的主机处于同一网络；路由器连接不同的网络，路由器的每个端口都是不同网络
- IP地址分类
  - A：前8位作为网络位，第1位必须是0。首字节范围1 - 127
  - B：前16位作为网络位，前2位必须是10。首字节范围128 - 191
  - C：前24位作为网络位，前3位必须是110。首字节范围192 - 223
  - D：用于多播，也叫组播
  - E：保留
- 私有地址
  - A：10.0.0.0/8       => /8表示网络位是8位
  - B：172.16.0.0 - 172.31.0.0/16
  - C：192.168.0.0 - 192.168.255.0/24

## 2进制与10进制的转换

- 8位2进制数一定能表示成0-255之间的数字。
- 2进制从右向左，每向左一个数，值翻1倍
- 2进制与10进制转换，用加减法来实现

| 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 128  | 64   | 32   | 16   | 8    | 4    | 2    | 1    |

200 => 11001000

10011100 => 128 + 0 + 0 + 16 + 8 + 4 + 0 + 0 => 156







